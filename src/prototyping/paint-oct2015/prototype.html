<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>CinsImp Paint Tool Prototype</title>
<style>

.PaintCanvas
{
	display: block;
	margin: 20px;
	border: 1px solid black;
	background-color: white;
	width: 600px;
	height: 400px;
	float: left;
}

.Swatch
{
	display: inline-block;
	width: 20px;
	height: 20px;
	margin: 0;
	margin-right: 1px;
	margin-bottom: 1px;
}

</style>
<script>

function Paint()
{
	
}

Paint.TOOL_BROWSE = 1;
Paint.TOOL_SELECT = 4;
Paint.TOOL_LASSO = 5;
Paint.TOOL_PENCIL = 6;
Paint.TOOL_BRUSH = 7;
Paint.TOOL_ERASER = 8;
Paint.TOOL_LINE = 9;
Paint.TOOL_SPRAY = 10;
Paint.TOOL_RECTANGLE = 11;
Paint.TOOL_ROUND_RECT = 12;
Paint.TOOL_BUCKET = 13;
Paint.TOOL_OVAL = 14;
Paint.TOOL_FREE_SHAPE = 15;
Paint.TOOL_TEXT = 16;
Paint.TOOL_REG_POLY = 17;
Paint.TOOL_FREE_POLY = 18;
Paint.TOOL_EYEDROPPER = 19;



Paint.prototype.choose_tool = function(in_tool)
{
	this._tool = in_tool;
}


Paint.prototype.choose_color = function(in_color)
{
	this._color = in_color;
	
}




</script>
<script language="javascript" type="text/javascript" src="colours.js"></script>
</head>
<body>

<div class="PaintCanvas">



</div>

<div id="ToolPalette" style="width: 120px; float: left;margin-top: 30px;">
<img src="gfx/browse-normal.png" width="32" onclick="choose_tool(Paint.TOOL_BROWSE);" style="margin-right: 64px;">
<img src="gfx/select-normal.png" width="32" onclick="choose_tool(Paint.TOOL_SELECT);">
<img src="gfx/lasso-normal.png" width="32" onclick="choose_tool(Paint.TOOL_LASSO);">
<img src="gfx/pencil-normal.png" width="32" onclick="choose_tool(Paint.TOOL_PENCIL);">
<img src="gfx/brush-normal.png" width="32" onclick="choose_tool(Paint.TOOL_BRUSH);">
<img src="gfx/eraser-normal.png" width="32" onclick="choose_tool(Paint.TOOL_ERASER);">
<img src="gfx/line-normal.png" width="32" onclick="choose_tool(Paint.TOOL_LINE);">
<img src="gfx/spray-normal.png" width="32" onclick="choose_tool(Paint.TOOL_SPRAY);">
<img src="gfx/rectangle-normal.png" width="32" onclick="choose_tool(Paint.TOOL_RECTANGLE);">
<img src="gfx/roundrect-normal.png" width="32" onclick="choose_tool(Paint.TOOL_ROUND_RECT);">
<img src="gfx/bucket-normal.png" width="32" onclick="choose_tool(Paint.TOOL_BUCKET);">
<img src="gfx/oval-normal.png" width="32" onclick="choose_tool(Paint.TOOL_OVAL);">
<img src="gfx/freeshape-normal.png" width="32" onclick="choose_tool(Paint.TOOL_FREE_SHAPE);">
<img src="gfx/text-normal.png" width="32" onclick="choose_tool(Paint.TOOL_TEXT);">
<img src="gfx/regpoly-normal.png" width="32" onclick="choose_tool(Paint.TOOL_REG_POLY);">
<img src="gfx/freepoly-normal.png" width="32" onclick="choose_tool(Paint.TOOL_FREE_POLY);">
<img src="gfx/eyedrop-normal.png" width="32" onclick="choose_tool(Paint.TOOL_EYEDROPPER);">
</div>


<div id="ColorSwatchTable" style="width: 650px; clear: left; font-size: 0;">
</div>


<script>


var gPaint = new Paint();

function choose_tool(in_tool)
{
	var img_list = document.getElementById('ToolPalette').children;
	for (var t = 0; t < img_list.length; t++)
	{
		var palette_img = img_list[t];
		palette_img.src = palette_img.src.replace('hilite', 'normal');
	}
	
	/* set the new tool indication */
	in_tool--;
	if (in_tool > 1) in_tool -= 2;
	var palette_img = document.getElementById('ToolPalette').children[in_tool];
	palette_img.src = palette_img.src.replace('normal', 'hilite');
	
	gPaint.choose_tool(in_tool);
}


function chooseColour(in_event)
{
	var e = in_event || window.event;
	var dom_swatch = e.target;
	var color = dom_swatch.style.backgroundColor.replace('rgb(','').replace(')','').split(',');
	color[0] = color[0] * 1;
	color[1] = color[1] * 1;
	color[2] = color[2] * 1;
	gPaint.choose_color(color);
}


function setupColours()
{
	var dom_table = document.getElementById('ColorSwatchTable');
	
	for (var c = 0; c < Colours.DEFAULT_SET.length; c++)
	{
		var colour = Colours.DEFAULT_SET[c];
		
		var dom_swatch = document.createElement('div');
		dom_swatch.className = 'Swatch';
		dom_swatch.style.backgroundColor = 'rgba('+colour[0]+','+colour[1]+','+colour[2]+',1)';
		dom_table.appendChild(dom_swatch);
		
		dom_swatch.addEventListener('mousedown', chooseColour);
	}
	
	/*var cell_size = dom_table.children[0].clientWidth;
	var per_row = Math.floor(dom_table.clientWidth / dom_table.children[0].clientWidth);
	var rows = Math.ceil(Colours.DEFAULT_SET.length / per_row);
	
	dom_ele.style.width = per_row * cell_size + 'px';
	dom_ele.style.height = rows * cell_size + 'px';*/
	
	
}

setupColours();
choose_tool(Paint.TOOL_BROWSE);
gPaint.choose_color([0,0,0]);

</script>


</body>
</html>
